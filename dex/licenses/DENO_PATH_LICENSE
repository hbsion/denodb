Copyright the Browserify authors. MIT License.
Ported mostly from https://github.com/browserify/path-browserify/
